# Build and test datafu-spark code for the various Scala/Spark combinations for new PRs
name: "testPRs"

on:
  pull_request:
    branches: [ master ]
  schedule:
    - cron: '36 3 * * 5'

jobs:
  analyze:
    name: Test
    runs-on: ubuntu-latest
    permissions:
      actions: read
      contents: read
      security-events: write

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Use Java 8
      uses: actions/setup-java@v2
      with:
         java-version: '8'
         distribution: 'adopt'
         cache: 'gradle'
    
    - run: |
       gradle -b bootstrap.gradle
       ./gradlew :datafu-spark: test
